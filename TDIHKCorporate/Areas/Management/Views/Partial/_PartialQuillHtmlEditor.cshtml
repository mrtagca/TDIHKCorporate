@using Newtonsoft.Json


@*<link rel="stylesheet" href="https://kendo.cdn.telerik.com/2018.3.1017/styles/kendo.common-material.min.css" />
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2018.3.1017/styles/kendo.material.min.css" />
        <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2018.3.1017/styles/kendo.material.mobile.min.css" />*@

@*<script src="~/Content/Admin/vendor/jquery/jquery-3.5.1.min.js"></script>*@
@*<script src="https://kendo.cdn.telerik.com/2018.3.1017/js/kendo.all.min.js"></script>*@

<link href="~/Scripts/kendo/css/kendo.common-material.min.css" rel="stylesheet" />
<link href="~/Scripts/kendo/css/kendo.material.min.css" rel="stylesheet" />
<link href="~/Scripts/kendo/css/kendo.material.mobile.min.css" rel="stylesheet" />

<script src="~/Scripts/jquery-1.9.1.min.js"></script>
<script src="~/Scripts/kendo/js/kendo.all.min.js"></script>



<!-- Modal -->
<div class="modal fade" id="htmlSourceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">HTML Source</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <textarea id="ModalHtml" class="form-control" style="background-color:#ffffff">

</textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button onclick="SaveHtmlSource()" type="button" class="btn btn-primary">Paste Html</button>
            </div>
        </div>
    </div>
</div>
<br />

<div class="col-lg-12">
    <div id="example">
        <textarea id="editor" style="width:100%; height:1000px;font-family:Calibri;">

</textarea>
    </div>
</div>

<script type="text/javascript">


    $(document).ready(function () {

        function onPaste(e) {
            // replace all <a> / </a> tags in the pasted content
            //e.html = e.html.replace(/<\/?a[^>]*>/g, "");
            return e.html;
        }

        //var defaultTools = kendo.ui.Editor.defaultTools;

        //defaultTools["insertLineBreak"].options.shift = true;
        //delete defaultTools["insertParagraph"].options;


        $("#editor").kendoEditor(
            {
                //paste: function (e) {
                //    $(".text-editor").find("*").not("strong,ul,li,ol,p").each(function () {
                //        $(this).replaceWith(this.innerHTML);
                //    });
                //},
                //paste: function (ev) {
                //    ev.html = $(ev.html).text().replace(/<p[^>]*>/g, "").replace(/<\/p>/g, "");
                //},

                //pasteCleanup: {
                //    all: false,
                //    css: false,
                //    keepNewLines: true,
                //    msAllFormatting: true,
                //    msConvertLists: true,
                //    msTags: false,
                //    none: true,
                //    span: true
                //},

                pasteCleanup: {
                    css: true,
                    span: true
                },
                tools: [
                    //{
                    //    name: "fontName",
                    //    items: [
                    //        //{ text: "Andale Mono", value: "Andale Mono" },
                    //        //{text: "Avenir", value: "AvenirNextCondensed-Bold" },
                    //        //{ text: "Arial", value: "Arial" },
                    //        //{ text: "Arial Black", value: "Arial Black" },
                    //        //{ text: "Book Antiqua", value: "Book Antiqua" },
                    //        { text: "Calibri", value: "Calibri" }
                    //        //,
                    //        //{ text: "Comic Sans MS", value: "Comic Sans MS" },
                    //        //{ text: "Courier New", value: "Courier New" },
                    //        //{ text: "Georgia", value: "Georgia" },
                    //        //{ text: "Helvetica", value: "Helvetica" },
                    //        //{ text: "Impact", value: "Impact" },
                    //        //{ text: "Symbol", value: "Symbol" },
                    //        //{ text: "Tahoma", value: "Tahoma" },
                    //        //{ text: "Terminal", value: "Terminal" },
                    //        //{ text: "Times New Roman", value: "Times New Roman" },
                    //        //{ text: "Trebuchet MS", value: "Trebuchet MS" },
                    //        //{ text: "Verdana", value: "Verdana" },
                    //        //{ text: "Webdings", value: "Webdings" },
                    //        //{ text: "Wingdings", value: "Wingdings" }
                    //    ]
                    //},

                    {
                        name: "foreColor",
                        palette: ["#132C50", "#AEC9E9", "#E7E8E9", "#616771", "#e28639", "#000000", "#FFFFFF", "#bda064","#242424"]
                    },
                    {
                        name: "backColor",
                        palette: ["#132C50", "#AEC9E9", "#E7E8E9", "#616771", "#e28639", "#000000", "#FFFFFF", "#bda064", "#242424"]
                    },

                    "bold",
                    "italic",
                    "underline",
                    "strikethrough",
                    "justifyLeft",
                    "justifyCenter",
                    "justifyRight",
                    "justifyFull",
                    "insertUnorderedList",
                    "insertOrderedList",
                    "indent",
                    "outdent",
                    "createLink",
                    "unlink",
                    "insertImage",
                    "insertFile",
                    "subscript",
                    "superscript",
                    "tableWizard",
                    "createTable",
                    "addRowAbove",
                    "addRowBelow",
                    "addColumnLeft",
                    "addColumnRight",
                    "deleteRow",
                    "deleteColumn",
                    "viewHtml",
                    "formatting",
                    "cleanFormatting",
                    //"fontName",
                    //"fontSize",
                    //"foreColor",
                    //"backColor",
                    "print",
                    "pdf",
                    "tableWizard",
                    "createTable",
                    "addRowAbove",
                    "addRowBelow",
                    "addColumnLeft",
                    "addColumnRight",
                    "deleteRow",
                    "deleteColumn",
                    "mergeCellsHorizontally",
                    "mergeCellsVertically",
                    "splitCellHorizontally",
                    "splitCellVertically"
                ],
                pdf: {
                    fileName: "PDFDemoDocument.pdf",
                    proxyURL: "https://demos.telerik.com/kendo-ui/service/export",
                    paperSize: "a4",
                    margin: {
                        bottom: 20,
                        left: 20,
                        right: 20,
                        top: 20
                    }
                },
                imageBrowser: {
                    messages: {
                        dropFilesHere: "Drop files here"
                    },
                    transport: {
                        read:
                        {
                            url: "/Management/Image/ImageBrowserRead",
                            dataType: "json",
                            type: "GET"
                        },
                        destroy: {
                            url: "/Management/Image/ImageBrowserDestroy",
                            type: "POST"
                        },
                        create: {
                            url: "/Management/Image/ImageBrowserCreate",
                            type: "POST"
                        },
                        thumbnailUrl: "/Management/Image/ThumbnailRead",
                        uploadUrl: "/Management/Image/ImageBrowserUpload",
                        imageUrl: "/Content/MainSite/assets/images/{0}"
                    }
                }
                ,
                fileBrowser: {
                    messages: {
                        dropFilesHere: "Drop files here"
                    },
                    transport: {
                        read:
                        {
                            url: "/Management/File/FileBrowserRead",
                            dataType: "json",
                            type: "GET",
                            data: {path:"{0}"}
                        },
                        destroy: {
                            url: "/Management/File/FileBrowserDestroy",
                            type: "POST"
                        },
                        create: {
                            url: "/Management/File/FileBrowserCreate",
                            type: "POST"
                        },
                        uploadUrl: "/Management/File/FileBrowserUpload",
                        fileUrl: "/Content/MainSite/assets/files/{0}"
                    }
                }

            });

        var editor = $("#editor").data("kendoEditor");

        @{

            IHtmlString headerHtml = Html.Raw(Html.Partial("~/Views/Partial/_PartialHeader.cshtml"));
        }

        var header = '<!--HtmlHeaderEnd|-->'+ @Html.Raw(JsonConvert.SerializeObject(headerHtml.ToHtmlString()));

        var htmlContent = header;
        editor.value(htmlContent);
    });
</script>

